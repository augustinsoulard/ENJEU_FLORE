# Definition du repertoire de fichiers
WD = dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(WD)
# Charger les bibliotheques necessaires
if(!require("readxl")){install.packages("readxl")} ; library("readxl")
if(!require("xlsx")){install.packages("xlsx")} ; library("xlsx")
if(!require("tidyverse")){install.packages("tidyverse")} ; library("tidyverse")
# URL du fichier ZIP contenant le Shapefile
url_zip <- "https://inpn.mnhn.fr/docs-web/docs/download/232324"
##########################Telechargement des fichiers non disponibles
# Télécharger le fichier ZIP
download.file(url_zip, destfile = "BaseConnaissance.zip", mode = "wb")
# Décompresser le fichier ZIP
unzip("BaseConnaissance.zip")
#Import de la base de connaissance
BDC_STATUTS_17 <- read.csv("BDC-Statuts-v17/BDC_STATUTS_17.csv")
# Import de TAXREFv17
TAXREFv17_FLORE_FR <- read.csv("../../../BDD_FLORE_CONSTRUCT/TAXONOMIE/TAXREF/TAXREFv17_FLORE_FR.csv")
TAXREFv17_FLORE_FR$CD_NOM = as.character(TAXREFv17_FLORE_FR$CD_NOM)
# Filtre de la base de connaissance pour la flore
BDC_STATUTS_17_FLORE = BDC_STATUTS_17 %>%
filter(BDC_STATUTS_17$CD_NOM %in% TAXREFv17_FLORE_FR$CD_REF)
View(BDC_STATUTS_17_FLORE)
# Filtre de la base de connaissance pour la flore
BDC_STATUTS_17_FLORE = BDC_STATUTS_17 %>%
filter(BDC_STATUTS_17$CD_NOM %in% TAXREFv17_FLORE_FR$CD_REF)
#Creer le futur nom des colonnes
BDC_STATUTS_17_FLORE$LB_STATUT_COL = make.names(paste0(BDC_STATUTS_17_FLORE$LB_TYPE_STATUT,"_",
BDC_STATUTS_17_FLORE$LB_ADM_TR))
View(BDC_STATUTS_17_FLORE)
View(BDC_STATUTS_17)
colnames(BDC_STATUTS_17_FLORE)
unique(BDC_STATUTS_17_FLORE$LB_STATUT_COL)
View(BDC_STATUTS_17_FLORE)
View(BDC_STATUTS_17_FLORE)
# Filtre de la base de connaissance pour la flore
BDC_STATUTS_17_FLORE = BDC_STATUTS_17 %>%
filter(BDC_STATUTS_17$CD_NOM %in% TAXREFv17_FLORE_FR$CD_REF) %>%
filter(LB_ADM_TR %in% c("Monde","Europe") | CD_ISO3166_1 %in% c("FXX","FRA") |
CD_ISO3166_2 %in% c("FR-13","FR-04","FR-05","FR-06","FR-83","FR-84","FR-U"))
#Creer le futur nom des colonnes
BDC_STATUTS_17_FLORE$LB_STATUT_COL = make.names(paste0(BDC_STATUTS_17_FLORE$LB_TYPE_STATUT,"_",
BDC_STATUTS_17_FLORE$LB_ADM_TR))
unique(BDC_STATUTS_17_FLORE$LB_STATUT_COL)
# Traitement du tableau pour l'horizontaliser
TAXREFv17_FLORE_JOIN = TAXREFv17_FLORE_FR
for(i in 1:length(levels(as.factor(BDC_STATUTS_17_FLORE$LB_STATUT_COL)))){
cat(i,"/",length(levels(as.factor(BDC_STATUTS_17_FLORE$LB_STATUT_COL))),"\n")
LB_STATUT = levels(as.factor(BDC_STATUTS_17_FLORE$LB_STATUT_COL))[i]
BDC_WORFLOW = BDC_STATUTS_17_FLORE %>%
filter(BDC_STATUTS_17_FLORE$LB_STATUT_COL %in% LB_STATUT)
BDC_TO_JOIN = BDC_WORFLOW %>%
distinct(CD_NOM, .keep_all = TRUE) %>%
select(CD_NOM, CODE_STATUT) %>%
rename(!!LB_STATUT := CODE_STATUT)
#Jointure avec le TAXREF
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,BDC_TO_JOIN,by=c("CD_REF"="CD_NOM"))
}
FloreZH = read.csv("../../../ZONE_HUMIDE/RfloreZH/FloreZH.csv")
# FloreZH = read.csv("../../../ZONE_HUMIDE/RfloreZH/FloreZH.csv")
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,FloreZH,by=c("CD_REF"="CODE.FVF"))
# Charger les bibliotheques necessaires
if(!require("readxl")){install.packages("readxl")} ; library("readxl")
if(!require("xlsx")){install.packages("xlsx")} ; library("xlsx")
if(!require("tidyverse")){install.packages("tidyverse")} ; library("tidyverse")
# FloreZH = read.csv("../../../ZONE_HUMIDE/RfloreZH/FloreZH.csv")
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,FloreZH,by=c("CD_REF"="CODE.FVF"))
if(!require("xlsx")){install.packages("xlsx")} ; library("xlsx")
# Definition du repertoire de fichiers
WD = dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(WD)
# Charger les bibliotheques necessaires
if(!require("readxl")){install.packages("readxl")} ; library("readxl")
if(!require("xlsx")){install.packages("xlsx")} ; library("xlsx")
if(!require("tidyverse")){install.packages("tidyverse")} ; library("tidyverse")
read.table("../Liste_EVEE_PACA_paca_29022024.txt",h=T)
Liste_EVEE_PACA = read.table("../Liste_EVEE_PACA_paca_29022024.txt",h=T)
# Import de TAXREFv17
TAXREFv17_FLORE_FR_SYN.csv <- read.csv("../../../BDD_FLORE_CONSTRUCT/TAXONOMIE/TAXREF/TAXREFv17_FLORE_FR_SYN.csv")
# Import de TAXREFv17
TAXREFv17_FLORE_FR_SYN.csv <- read.csv("../../TAXONOMIE/TAXREF/TAXREFv17_FLORE_FR_SYN.csv")
# Import de TAXREFv17
TAXREFv17_FLORE_FR_SYN.csv <- read.csv("../../../TAXONOMIE/TAXREF/TAXREFv17_FLORE_FR_SYN.csv")
TAXREFv17_FLORE_FR_SYN.csv$CD_NOM = as.character(TAXREFv17_FLORE_FR_SYN.csv$CD_NOM)
View(Liste_EVEE_PACA)
#Jointure
TAB_GEN_JOIN_BRUT = left_join(Liste_EVEE_PACA,TAXREFv17_FLORE_FR_SYN.csv,by=c("cd_ref"="CD_NOM"))
# Import de TAXREFv17
TAXREFv17_FLORE_FR_SYN.csv <- read.csv("../../../TAXONOMIE/TAXREF/TAXREFv17_FLORE_FR_SYN.csv")
#Jointure
TAB_GEN_JOIN_BRUT = left_join(Liste_EVEE_PACA,TAXREFv17_FLORE_FR_SYN.csv,by=c("cd_ref"="CD_NOM"))
# VERIFICATION !!!!!!MANUELLE!!!!!!!! des taxons dont la jointure a echouee
NO_MATCH = TAB_GEN_JOIN_BRUT[is.na(TAB_GEN_JOIN_BRUT$REGNE),]
View(NO_MATCH)
View(TAB_GEN_JOIN_BRUT)
View(Liste_EVEE_PACA)
TAB_GEN_JOIN_BRUT %>% select(CD_NOM,famille,nom_vern_invmmed,nom_taxon_invmed,NOM_VALIDE,date_intro,origine,milieux,categorie_paca)
View(TAXREFv17_FLORE_FR_SYN.csv)
TAB_GEN_JOIN_BRUT %>% select(CD_REF,famille,nom_vern_invmmed,nom_taxon_invmed,NOM_VALIDE,date_intro,origine,milieux,categorie_paca)
TAB_GEN_JOIN_BRUT %>% select(CD_NOM = CD_REF,famille,nom_vern_invmmed,nom_taxon_invmed,NOM_VALIDE,date_intro,origine,milieux,categorie_paca)
#Table finale
TAB_EVEE_PACA = TAB_GEN_JOIN_BRUT %>% select(CD_NOM = CD_REF,famille,nom_vern_invmmed,nom_taxon_invmed,NOM_VALIDE,date_intro,origine,milieux,categorie_paca)
write.xlsx(TAB_EVEE_PACA,"TAB_EVEE_PACA.xlsx")
write.xlsx(TAB_EVEE_PACA,"../TAB_EVEE_PACA.xlsx")
write.xlsx(TAB_EVEE_PACA,"../TAB_EVEE_PACA.xlsx",row.names = F)
View(NO_MATCH)
write.xlsx(NO_MATCH,"../TAB_EVEE_PACA_NOMACTH.xlsx",row.names = F)
#Chargement flore EEE
TAB_EVEE_PACA <- read_excel("../../../BDD_FLORE_CONSTRUCT/EEE/PACA/TAB_EVEE_PACA.xlsx")
#Chargement flore EEE
TAB_EVEE_PACA <- read_excel("../../../../BDD_FLORE_CONSTRUCT/EEE/PACA/TAB_EVEE_PACA.xlsx")
TAB_EVEE_PACA %>% select(CD_NOM,categorie_paca)
TAB_EVEE_PACA = TAB_EVEE_PACA %>% select(CD_NOM,categorie_paca)
left_join(TAXREFv17_FLORE_JOIN,TAB_EVEE_PACA,by=c("CD_REF"="CD_NOM"))
# Jointure flore EVEE
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,TAB_EVEE_PACA,by=c("CD_REF"="CD_NOM"))
View(TAXREFv17_FLORE_JOIN)
# Chargement enjeu CBN
TAB_EVEE_PACA <- read_excel("../../HIERARCHISATION_CBN_PACA/HIERARCHISATION_ENJEU_RESEDA_TAXREFv16.xlsx")
# Chargement enjeu CBN
TAB_EVEE_PACA <- read_excel("../../../HIERARCHISATION_CBN_PACA/HIERARCHISATION_ENJEU_RESEDA_TAXREFv16.xlsx")
# Chargement enjeu CBN
TAB_EVEE_PACA <- read_excel("../../../../HIERARCHISATION_CBN_PACA/HIERARCHISATION_ENJEU_RESEDA_TAXREFv16.xlsx")
# Chargement enjeu CBN
TAB_EVEE_PACA <- read_excel("../HIERARCHISATION_CBN_PACA/HIERARCHISATION_ENJEU_RESEDA_TAXREFv16.xlsx")
# Chargement enjeu CBN
TAB_EVEE_PACA <- read_excel("../../HIERARCHISATION_CBN_PACA/HIERARCHISATION_ENJEU_RESEDA_TAXREFv16.xlsx")
# Definition du repertoire de fichiers
WD = dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(WD)
# Chargement enjeu CBN
TAB_EVEE_PACA <- read_excel("../../HIERARCHISATION_CBN_PACA/HIERARCHISATION_ENJEU_RESEDA_TAXREFv16.xlsx")
# Chargement enjeu CBN
ENJEU_CBN <- read_excel("../../HIERARCHISATION_CBN_PACA/HIERARCHISATION_ENJEU_RESEDA_TAXREFv16.xlsx")
View(ENJEU_CBN)
View(ENJEU_CBN)
# Jointure enjeu CBN
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,ENJEU_CBN,by=c("CD_REF"="CD_NOM"))
ENJEU_CBN$CD_NOM = as.double(ENJEU_CBN$CD_NOM)
View(ENJEU_CBN)
# Jointure enjeu CBN
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,ENJEU_CBN,by=c("CD_REF"="CD_NOM"))
View(ENJEU_CBN)
HIERARCHISATION_ENJEU_RESEDA =ENJEU_CBN
####### MISE A JOUR TAXREF
# Import de TAXREFv17
TAXREFv17_FLORE_FR_SYN.csv <- read.csv("../../BDD_FLORE_CONSTRUCT/TAXONOMIE/TAXREF/TAXREFv17_FLORE_FR_SYN.csv")
####### MISE A JOUR TAXREF
# Import de TAXREFv17
TAXREFv17_FLORE_FR_SYN.csv <- read.csv("../../../BDD_FLORE_CONSTRUCT/TAXONOMIE/TAXREF/TAXREFv17_FLORE_FR_SYN.csv")
View(HIERARCHISATION_ENJEU_RESEDA)
#Jointure
TAB_GEN_JOIN_BRUT = left_join(HIERARCHISATION_ENJEU_RESEDA,TAXREFv17_FLORE_FR_SYN.csv,by=c("CD_NOM"="CD_NOM"))
# VERIFICATION !!!!!!MANUELLE!!!!!!!! des taxons dont la jointure a echouee
NO_MATCH = TAB_GEN_JOIN_BRUT[is.na(TAB_GEN_JOIN_BRUT$REGNE),]
View(TAB_GEN_JOIN_BRUT)
#Tables finales
HIERARCHISATION_ENJEU_RESEDA = TAB_GEN_JOIN_BRUT %>% select(CD_NOM = CD_REF,NOM_VALIDE,NOM_CITE,ENJEU_CONSERVATION)
#Enregistrement des tables en format excel et csv
write.xlsx(NO_MATCH,"../HIERARCHISATION_ENJEU_RESEDA_TAXREFv17_NOMACTH.xlsx",row.names = F)
write.xlsx(HIERARCHISATION_ENJEU_RESEDA,"../HIERARCHISATION_ENJEU_RESEDA_TAXREFv17.xlsx",row.names = F)
View(HIERARCHISATION_ENJEU_RESEDA)
#Enregistrement des tables en format excel et csv
write.csv2(NO_MATCH,"HIERARCHISATION_ENJEU_RESEDA_TAXREFv17_NO_MATCH.csv",row.names = F,fileEncoding = "UTF-8")
write.csv2(HIERARCHISATION_ENJEU_RESEDA,"HIERARCHISATION_ENJEU_RESEDA_TAXREFv17.csv",row.names = F,fileEncoding = "UTF-8")
# Chargement enjeu CBN
ENJEU_CBN <- read.csv2("../../HIERARCHISATION_CBN_PACA/worflow/HIERARCHISATION_ENJEU_RESEDA_TAXREFv17.csv")
# Chargement enjeu CBN
ENJEU_CBN <- read.csv2("../../HIERARCHISATION_CBN_PACA/WORKFLOW/HIERARCHISATION_ENJEU_RESEDA_TAXREFv17.csv")
# Definition du repertoire de fichiers
WD = dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(WD)
#Enregistrement des tables en format excel et csv
write.csv2(NO_MATCH,"HIERARCHISATION_ENJEU_RESEDA_TAXREFv17_NO_MATCH.csv",row.names = F,fileEncoding = "UTF-8")
write.csv2(HIERARCHISATION_ENJEU_RESEDA,"HIERARCHISATION_ENJEU_RESEDA_TAXREFv17.csv",row.names = F,fileEncoding = "UTF-8")
# Chargement enjeu CBN
ENJEU_CBN <- read.csv2("../../HIERARCHISATION_CBN_PACA/WORKFLOW/HIERARCHISATION_ENJEU_RESEDA_TAXREFv17.csv")
# Definition du repertoire de fichiers
WD = dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(WD)
# Chargement enjeu CBN
ENJEU_CBN <- read.csv2("../../HIERARCHISATION_CBN_PACA/WORKFLOW/HIERARCHISATION_ENJEU_RESEDA_TAXREFv17.csv")
# Chargement enjeu CBN
ENJEU_CBN <- read.csv2("../../HIERARCHISATION_CBN_PACA/WORKFLOW/HIERARCHISATION_ENJEU_RESEDA_TAXREFv17.csv")
ENJEU_CBN$CD_NOM = as.double(ENJEU_CBN$CD_NOM)
# Jointure enjeu CBN
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,ENJEU_CBN,by=c("CD_REF"="CD_NOM"))
#Selection des colonnes pour le tableau final
TAXREFv17_FLORE_JOIN = TAXREFv17_FLORE_JOIN %>% select(CD_NOM = CD_REF,
TRIGRAMME,
NOM_VALIDE,
NOM_VERN,
FAMILLE,
SOUS_FAMILLE,
INDIGENAT = FR,
EVEE = categorie_paca,
DH = Directive.Habitat_France.métropolitaine,
PN = Protection.nationale_France.métropolitaine,
LRN = Liste.rouge.nationale_France.métropolitaine,
PR = Protection.régionale_Provence.Alpes.Côte.d.Azur,
PR_Corr = Protection.régionale_Provence.Alpes.Côte.d.Azur,
LRR = Liste.rouge.régionale_Provence.Alpes.Côte.d.Azur,
ZNIEFF = ZNIEFF.Déterminantes_Provence.Alpes.Côte.d.Azur,
PD04 = Protection.départementale_Alpes.de.Haute.Provence,
PD05 = Protection.départementale_Hautes.Alpes,
PD06 = Protection.départementale_Alpes.Maritimes,
PD83 = Protection.départementale_Var,
PD84 = Protection.départementale_Vaucluse,
ENJEU_CBN = ENJEU_CONSERVATION,
indicatrice_ZH = INDIC_ZH,
Barcelonne =Convention.de.Barcelone_France.métropolitaine,
Berne = Convention.de.Berne_France.métropolitaine,
Mondiale = Liste.rouge.mondiale_Monde,
Europe = Liste.rouge.européenne_Europe
)
ENJEU_CBN = ENJEU_CBN %>% select(CD_NOM,ENJEU_CONSERVATION)
# Traitement du tableau pour l'horizontaliser
TAXREFv17_FLORE_JOIN = TAXREFv17_FLORE_FR
for(i in 1:length(levels(as.factor(BDC_STATUTS_17_FLORE$LB_STATUT_COL)))){
cat(i,"/",length(levels(as.factor(BDC_STATUTS_17_FLORE$LB_STATUT_COL))),"\n")
LB_STATUT = levels(as.factor(BDC_STATUTS_17_FLORE$LB_STATUT_COL))[i]
BDC_WORFLOW = BDC_STATUTS_17_FLORE %>%
filter(BDC_STATUTS_17_FLORE$LB_STATUT_COL %in% LB_STATUT)
BDC_TO_JOIN = BDC_WORFLOW %>%
distinct(CD_NOM, .keep_all = TRUE) %>%
select(CD_NOM, CODE_STATUT) %>%
rename(!!LB_STATUT := CODE_STATUT)
#Jointure avec le TAXREF
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,BDC_TO_JOIN,by=c("CD_REF"="CD_NOM"))
}
#### Ajout des plantes indicatrices ZH et des EEEs
#Chargement flore ZH
FloreZH = read.csv("../../../01_MINI_OUTILS/ZONE_HUMIDE/RfloreZH/FloreZH.csv")
# FloreZH = read.csv("../../../ZONE_HUMIDE/RfloreZH/FloreZH.csv")
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,FloreZH,by=c("CD_REF"="CODE.FVF"))
# Chargement flore EEE
TAB_EVEE_PACA <- read_excel("../../../../BDD_FLORE_CONSTRUCT/EEE/PACA/TAB_EVEE_PACA.xlsx")
TAB_EVEE_PACA = TAB_EVEE_PACA %>% select(CD_NOM,categorie_paca)
# Definition du repertoire de fichiers
WD = dirname(rstudioapi::getActiveDocumentContext()$path)
setwd(WD)
# Chargement flore EEE
TAB_EVEE_PACA <- read_excel("../../../../BDD_FLORE_CONSTRUCT/EEE/PACA/TAB_EVEE_PACA.xlsx")
# Chargement flore EEE
TAB_EVEE_PACA <- read_excel("../../../BDD_FLORE_CONSTRUCT/EEE/PACA/TAB_EVEE_PACA.xlsx")
TAB_EVEE_PACA = TAB_EVEE_PACA %>% select(CD_NOM,categorie_paca)
# Jointure flore EVEE
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,TAB_EVEE_PACA,by=c("CD_REF"="CD_NOM"))
# Chargement enjeu CBN
ENJEU_CBN <- read.csv2("../../HIERARCHISATION_CBN_PACA/WORKFLOW/HIERARCHISATION_ENJEU_RESEDA_TAXREFv17.csv")
ENJEU_CBN$CD_NOM = as.double(ENJEU_CBN$CD_NOM)
ENJEU_CBN = ENJEU_CBN %>% select(CD_NOM,ENJEU_CONSERVATION)
# Jointure enjeu CBN
TAXREFv17_FLORE_JOIN = left_join(TAXREFv17_FLORE_JOIN,ENJEU_CBN,by=c("CD_REF"="CD_NOM"))
#Selection des colonnes pour le tableau final
TAXREFv17_FLORE_JOIN = TAXREFv17_FLORE_JOIN %>% select(CD_NOM = CD_REF,
TRIGRAMME,
NOM_VALIDE,
NOM_VERN,
FAMILLE,
SOUS_FAMILLE,
INDIGENAT = FR,
EVEE = categorie_paca,
DH = Directive.Habitat_France.métropolitaine,
PN = Protection.nationale_France.métropolitaine,
LRN = Liste.rouge.nationale_France.métropolitaine,
PR = Protection.régionale_Provence.Alpes.Côte.d.Azur,
PR_Corr = Protection.régionale_Provence.Alpes.Côte.d.Azur,
LRR = Liste.rouge.régionale_Provence.Alpes.Côte.d.Azur,
ZNIEFF = ZNIEFF.Déterminantes_Provence.Alpes.Côte.d.Azur,
PD04 = Protection.départementale_Alpes.de.Haute.Provence,
PD05 = Protection.départementale_Hautes.Alpes,
PD06 = Protection.départementale_Alpes.Maritimes,
PD83 = Protection.départementale_Var,
PD84 = Protection.départementale_Vaucluse,
ENJEU_CBN = ENJEU_CONSERVATION,
indicatrice_ZH = INDIC_ZH,
Barcelonne =Convention.de.Barcelone_France.métropolitaine,
Berne = Convention.de.Berne_France.métropolitaine,
Mondiale = Liste.rouge.mondiale_Monde,
Europe = Liste.rouge.européenne_Europe
)
## Mise en forme colonne ZNIEFF
TAXREFv17_FLORE_JOIN[!is.na(TAXREFv17_FLORE_JOIN$ZNIEFF),]$ZNIEFF = "D"
#Création de la colonne Protection AuRA
ProtectionAuRA = function(x){
valeur = NULL
if(!is.na(x["PN"]) && x["PN"] != "-"){
valeur = paste0(valeur," ","PN")
}
if(!is.na(x["PR"]) && x["PR"] != "-"){
valeur = paste0(valeur," ","PR")
}
if(!is.na(x["PD04"]) && x["PD04"] != "-"){
valeur = paste0(valeur," ","PD04")
}
if(!is.na(x["PD05"]) && x["PD05"] != "-"){
valeur = paste0(valeur," ","PD05")
}
if(!is.na(x["PD06"]) && x["PD06"] != "-"){
valeur = paste0(valeur," ","PD06")
}
if(!is.na(x["PD83"]) && x["PD83"] != "-"){
valeur = paste0(valeur," ","PD83")
}
if(!is.na(x["PD84"]) && x["PD84"] != "-"){
valeur = paste0(valeur," ","PD84")
}
if(is.null(valeur)){
valeur = "-"
}
return(valeur)
}
TAXREFv17_FLORE_JOIN$PROTECTION_AURA = apply(TAXREFv17_FLORE_JOIN,1,ProtectionPACA)
#Création de la colonne Protection AuRA
ProtectionPACA = function(x){
valeur = NULL
if(!is.na(x["PN"]) && x["PN"] != "-"){
valeur = paste0(valeur," ","PN")
}
if(!is.na(x["PR"]) && x["PR"] != "-"){
valeur = paste0(valeur," ","PR")
}
if(!is.na(x["PD04"]) && x["PD04"] != "-"){
valeur = paste0(valeur," ","PD04")
}
if(!is.na(x["PD05"]) && x["PD05"] != "-"){
valeur = paste0(valeur," ","PD05")
}
if(!is.na(x["PD06"]) && x["PD06"] != "-"){
valeur = paste0(valeur," ","PD06")
}
if(!is.na(x["PD83"]) && x["PD83"] != "-"){
valeur = paste0(valeur," ","PD83")
}
if(!is.na(x["PD84"]) && x["PD84"] != "-"){
valeur = paste0(valeur," ","PD84")
}
if(is.null(valeur)){
valeur = "-"
}
return(valeur)
}
TAXREFv17_FLORE_JOIN$PROTECTION_AURA = apply(TAXREFv17_FLORE_JOIN,1,ProtectionPACA)
View(TAXREFv17_FLORE_JOIN)
#Enregistrement du tableau a integrer à la methode enjeu PACA
write.csv(TAXREFv17_FLORE_JOIN,file = "TAB_GEN_METH_ENJEU_PACA.csv",row.names = F,fileEncoding = "UTF-8",na="-")
